# Recipe (MakeRecipe) for Cyrus-Sasl by roko, <ro.ko@mcnon.com>, on Wed Dec 8 15:56:58 BRST 2004
# Recipe for version 2.1.21 by David Smith <dsmith@algonet.se>, on tor aug 4 08:53:06 CEST 2005
# Recipe for version 2.1.22 by Rotem Zach, on Mon Oct 17 14:10:04 IST 2005
compile_version=1.8.4
url="http://fresh.t-systems-sfr.com/unix/src/misc/cyrus-sasl-2.1.22.tar.gz"
mirror_url="http://public.www.planetmirror.com/pub/cyrus-mail/cyrus-sasl-2.1.22.tar.gz"
file_size=1585093
file_md5=ff63905c6ec930a86dd53e2d9dc6af1f
recipe_type=configure
configure_options=(
   --disable-macos-framework  # Not necessary for Mac OS X since we are building inside Rootless
)

pre_build() {
    rm config/ltconfig config/libtool.m4
    libtoolize -f -c
    aclocal -I config -I cmulocal
    automake -a -c -f
    autoheader
    autoconf -f

    pushd saslauthd
    rm -f config/ltconfig
    libtoolize -f -c
    aclocal -I config -I ../cmulocal -I ../config
    automake -a -c -f
    autoheader
    autoconf -f
    popd
}

pre_install() {
    find plugins/.libs -name "*.la" -exec cp {} {}i \;
}
